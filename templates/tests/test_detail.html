{% extends 'base.html' %}

{% block title %}{{ test.name }}{% endblock %}

{% block content %}
  <h1>{{ test.name }}</h1>
  <p><strong>Lesson:</strong> {{ test.lesson }}</p>
  <p><strong>Test Code:</strong> {{ test.code }}</p>

  <h2>Questions</h2>
  <ul>
    {% for question in test.questions.all %}
      <li>
        <strong>{{ question.question_text }}</strong><br>
        <ul>
          <li>{{ question.answer_1 }}</li>
          <li>{{ question.answer_2 }}</li>
          <li>{{ question.answer_3 }}</li>
          <li>{{ question.answer_4 }}</li>
        </ul>
        <p><strong>Correct answer:</strong> Answer {{ question.correct_answer }}</p>
      </li>
    {% empty %}
      <li>No questions available.</li>
    {% endfor %}
  </ul>

  <h2>Students who completed the test:</h2>
  <ul>
    {% for registration in test.testregistration_set.all %}
      <li>
        {{ registration.student.name }}
      </li>
    {% empty %}
      <li>No students have completed this test yet.</li>
    {% endfor %}
  </ul>

  <a href="{% url 'add_question' id=test.id %}">Add a new question</a>

  <br><br>
  <a href="{% url 'dashboard' %}" class="btn btn-primary">Return to Main Menu</a>

  <!-- Display the unique join code -->
  <h3>Join the Test</h3>
  <p>Use this code to join the test: <strong>{{ test.code }}</strong></p>
{% endblock %}
